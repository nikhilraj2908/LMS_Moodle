<!DOCTYPE html>
<html>
<head>
    {{> theme_boost/head }}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
    /* Carousel Styles (keep your existing carousel styles) */
    #heroCarousel {
        position: relative;
        height: 68vh;
        overflow: hidden;
             border-bottom-right-radius: 60px;
    border-bottom-left-radius: 60px;
    box-shadow: 3px 5px 3vh 8px rgb(180, 191, 207);
        
    }
.main-container{
       
        background: linear-gradient(#ffffff,  #f0f6ff);
        padding-bottom: 5vh;
}
    .carousel-inner, 
    .carousel-item {
        height: 100%;
        width: 100%;
       
    }

    .carousel-item {
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
       
    }

    .carousel-overlay-box {
        background-color: #fff;
        padding: 30px;
        border: 2px solid #204070;
        border-radius: 15px;
        position: absolute;
        top: 50%;
        left: 3%;
        transform: translateY(-50%);
        max-width: 50%; 
        z-index: 2;
        width:32%;
         
    }

    /* Course Cards Overlay */
    .course-cards-overlay {
        position: relative;
        margin-top: -130px; /* Negative margin to pull up over carousel */
        z-index: 10;
        padding: 0 20px;
    }

    .course-cards-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        gap: 20px;
        max-width: 100%;
     margin: 0 auto;
    
    }

    .course-category {
        flex: 1;
        min-width: 250px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        padding: 20px;
    }

    .course-category h3 {
        color: #003366;
        margin-bottom: 15px;
        font-size: 1.2rem;
        font-weight: 600;
    }

    .course-category-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .course-category-list li {
        margin-bottom: 10px;
    }

    .course-category-list a {
        color: #555;
        text-decoration: none;
        display: flex;
        align-items: center;
        transition: all 0.2s;
    }

    .course-category-list a:hover {
        color: #003366;
        transform: translateX(5px);
    }

    .course-category-list a::before {
        content: "→";
        margin-right: 8px;
        color: #003366;
        opacity: 0;
        transition: all 0.2s;
    }

    .course-category-list a:hover::before {
        opacity: 1;
    }

    /* Buttons from Figma */
    .btn-figma {
        display: inline-block;
        padding: 10px 20px;
        border-radius: 6px;
        font-weight: 500;
        text-decoration: none;
        transition: all 0.3s;
        margin-right: 10px;
        margin-bottom: 10px;
    }

    .btn-primary-figma {
        background-color: #003366;
        color: white;
        border: 2px solid #003366;
    }

    .btn-primary-figma:hover {
        background-color: #002244;
        color: white;
    }

    .btn-outline-figma {
        background-color: transparent;
        color: #003366;
        border: 2px solid #003366;
    }

    .btn-outline-figma:hover {
        background-color: #003366;
        color: white;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .course-cards-overlay {
            margin-top: -50px;
        }
        
        .course-category {
            min-width: 100%;
        }
        
        .carousel-overlay-box {
            width: 90%;
            max-width: 90%;
            left: 5%;
        }
    }
    /* Hide admin buttons by default */
.btn-admin {
    display: none !important;
}

/* Show admin buttons only if user has site admin menu */
body.has-admin-menu .btn-admin {
    display: inline-block !important;
}

/* Hide user buttons if admin menu exists */
body.has-admin-menu .btn-user {
    display: none !important;
}

/* Show user buttons by default */
.btn-user {
    display: inline-block !important;
}
.custom-course-grid{
    margin:20px 40px;
}
.carousel-course-btn {
    display: flex;
    margin-left:3%;
    gap: 16px;
    margin-bottom:20px;
   
}

.carousel-course-btn button {
    padding: 10px 20px;
    border: none;
    border-radius: 30px;
    background: white;
    color: black;
    font-size: 16px;
    font-weight: 500;
    box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: all 0.3s ease;
}

.carousel-course-btn button:hover {
    background: #e0e0e0;
}

.carousel-course-btn button.active {
    background: #b0b0b0;
    color: #fff;
    font-weight: bold;
}
/* Fix drawer starting from the top */
#theme_boost-drawers-blocks.drawer-right {
    top: 0 !important;
    margin-top: 0 !important;
    padding-top: 0 !important;
    z-index: 1050;
}

/* Prevent outer containers from pushing it down */
body, #page-wrapper {
    margin-top: 0 !important;
}



.section-top-performers {
    background-image: url('/moodle/theme/academi/pix/topperformers-bg.png');
    background-repeat: no-repeat;
    background-position: center center;
    background-size: cover;
    padding: 0px 20px 40px 20px;
    position: relative;
    box-shadow: 0 8px 20px rgb(0 0 0 / 0.1);
}

.performer-container-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    position: relative;
}

.performers-carousel {
    display: flex;
    gap: 9rem;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 80px 120px;
    scrollbar-width: none;  /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
    width: 90%;
}

.performers-carousel::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

.performer-card {
    background: #d3f4ff;  /* light blue */
    border-radius: 20px;
    border: none; /* remove main border */
    flex: 0 0 28%;
    position: relative;
    padding: 40px 30px 30px 80px;
    box-sizing: border-box;
    box-shadow:
      inset 0 4px 6px rgba(0, 0, 0, 0.15), /* inner shadow */
      2px 2px 8px rgba(0, 0, 0, 0.1); /* subtle outer shadow */
    min-width: 320px;
 
}


/* Add inner border using pseudo-element */
.performer-card::before {
    content: "";
    position: absolute;
    top: 15px;             /* align with top */
    left: -16px;        /* shift 10px left outside */
    right: 16px;       /* keep right edge inside */
    bottom: -16px;      /* shift 10px down outside */
    border: 1.75px solid #204070;  /* semi-transparent blue border */
    border-radius: 20px;  /* same radius as card */
    pointer-events: none;
    box-sizing: border-box;
    z-index: 0;       /* behind main card */
}

.quote-mark.single-quote {
    position: absolute;
    top: -100px;
    right: 20px;
    font-size: 100px; /* adjust size as needed */
    color: #204070; /* subtle color */
    font-family: 'Arial', sans-serif;
    font-weight: 700;
    pointer-events: none; /* so it doesn't block clicks */
    user-select: none;
  transform: scaleX(-1) scaleY(-1);
}
.carousel-nav {
    background: none;
    border: none;
    font-weight: 600;
    color: #27408b;
    cursor: pointer;
    font-size: 2rem;
    padding: 0.5rem 1rem;
    transition: color 0.3s ease;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(255, 255, 255, 0.7);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.carousel-nav:hover {
    color: #003366;
    background-color: rgba(255, 255, 255, 0.9);
}

.section-top-performers {
 background-image: url('/moodle/theme/academi/pix/topperformers-bg.png');
 
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  padding: 0px 20px 40px 20px;

  position: relative;
  box-shadow: 0 8px 20px rgb(0 0 0 / 0.1);
}
.top-performer-heading{
    background: linear-gradient(to top, #ffffff 0%, rgb(204 242 255) 100%);
    padding:30px;
    border-bottom-right-radius: 45px 45px;
    border-bottom-left-radius: 45px 45px;
}
/* Rest of your existing performer card styles remain the same */

/* Stylish quotation marks */
.quote-mark {
    font-size: 80px;
    color: #204070;
    font-family: serif;
    position: absolute;
}

.left-quote {
    
   
}

.right-quote {
    bottom: 25px; /* lift it up */
    right: 20px;
}

/* Profile Image Overlap */
.performer-pic {
    position: absolute;
    top: 100px; /* move a bit down */
    left: -80px; /* slightly more outside the card */
    width: 140px;
    height: 140px;
    border-radius: 50%;
    overflow: hidden;
  
    box-shadow: 0 2px 10px rgba(0,0,0,0.15);
    background: white;
}

/* Image inside the profile */
.performer-pic img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Textual content inside card */
.performer-content {
    padding-left: 60px; /* to account for image overlap */
}

/* Name styling */
.performer-name {
    font-size: 2rem;
    font-weight: 700;
    color: #204070;
    margin-top: 10px;
}
/* Testimonial text */
.testimonial-text {
    font-style: italic;
    margin: 12px 0;
    color: #444;
}

/* Rating Stars */
.points {
    margin-top: 10px;
    font-size: 18px;
    color: gold;
}

/* View profile link as button */
.view-profile-link {
    display: inline-block;
    margin-top: 15px;
    font-size: 0.9rem;
    color: #204070;
    font-weight: 600;
    text-decoration: none;
    border: 1.5px solid #204070;
    border-radius: 8px;
    padding: 6px 14px;
    transition: all 0.3s ease;
}

.view-profile-link:hover {
    background: #204070;
    color: white;
    text-decoration: none;
    box-shadow: 0 4px 8px rgba(32,64,112,0.3);
}

    </style>
</head>
{{> theme_academi/header }}

{{#courseindex}}
  {{< theme_boost/drawer }}
    {{$id}}theme_boost-drawers-courseindex{{/id}}
    {{$drawerclasses}}drawer drawer-left {{#courseindexopen}}show{{/courseindexopen}}{{/drawerclasses}}
    {{$drawercontent}} {{{courseindex}}} {{/drawercontent}}
    {{$drawerpreferencename}}drawer-open-index{{/drawerpreferencename}}
    {{$drawerstate}}show-drawer-left{{/drawerstate}}
    {{$tooltipplacement}}right{{/tooltipplacement}}
    {{$closebuttontext}}{{#str}}closecourseindex, core{{/str}}{{/closebuttontext}}
  {{/ theme_boost/drawer}}
{{/courseindex}}

{{#hasblocks}}
  {{< theme_boost/drawer }}
    {{$id}}theme_boost-drawers-blocks{{/id}}
    {{$drawerclasses}}drawer drawer-right {{#blockdraweropen}}show{{/blockdraweropen}}{{/drawerclasses}}
    {{$drawercontent}}
      <section class="d-print-none" aria-label="{{#str}}blocks{{/str}}">
        {{{ addblockbutton }}}
        {{{ sidepreblocks }}}
      </section>
    {{/drawercontent}}
    {{$drawerpreferencename}}drawer-open-block{{/drawerpreferencename}}
    {{$forceopen}}{{#forceblockdraweropen}}1{{/forceblockdraweropen}}{{/forceopen}}
    {{$drawerstate}}show-drawer-right{{/drawerstate}}
    {{$tooltipplacement}}left{{/tooltipplacement}}
    {{$drawercloseonresize}}1{{/drawercloseonresize}}
    {{$closebuttontext}}{{#str}}closeblockdrawer, core{{/str}}{{/closebuttontext}}
  {{/ theme_boost/drawer}}
{{/hasblocks}}

<body {{{ bodyattributes }}}>
    {{> core/local/toast/wrapper}}
    <div id="page-wrapper" class="d-print-block">
        {{{ output.standard_top_of_body_html }}}
        
        
        <!-- Carousel Section -->
       <div class="main-container">

                 <div id="heroCarousel" class="carousel slide" data-ride="carousel" data-interval="3000">
            <div class="carousel-inner">
                {{#banners}}
                <div class="carousel-item {{#is_active}}active{{/is_active}}" style="background-image: url('{{image_url}}');">
                <div class="carousel-overlay-box">
    <h2>Transform your Learning Journey<br>With <span style="color: #003366; font-weight: 700;">ALOGICDATA</span></h2>
    <p>Bringing Education to Your Fingertips</p>
    <div>
        <!-- Admin buttons -->
            <a href="{{config.wwwroot}}/course/edit.php" class="btn-figma btn-primary-figma btn-admin">Upload Course</a>
            <a href="{{config.wwwroot}}/course/management.php" class="btn-figma btn-outline-figma btn-admin">Manage Courses</a>
            <a href="{{config.wwwroot}}/report/log/index.php" class="btn-figma btn-outline-figma btn-admin">Reports</a>

        
        <!-- User buttons -->
        <a href="{{config.wwwroot}}/my/courses.php" class="btn-figma btn-primary-figma btn-user">Explore All Courses</a> 
        <a href="{{config.wwwroot}}/calendar/view.php?view=month" class="btn-figma btn-outline-figma btn-user">My Calendar</a>
    </div>
</div>
                </div>
                {{/banners}}
            </div>
            <a class="carousel-control-prev" href="#heroCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#heroCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

        <!-- Course Cards Overlay -->
        <div class="course-cards-overlay">
    <div class="carousel-course-btn">
        <button class="active">New</button>
        <button>Continue Learning</button>
        <button>Closing Soon</button> 
    </div>
    <div class="course-cards-container">
        <div class="custom-course-grid" id="courseGrid">
            {{#courses}}
                <div class="custom-course-card">
                    <div class="custom-course-card-image">
                        <img src="{{course_image_url}}" alt="{{course_name}}">
                    </div>
                    <div class="custom-course-content">
                        <h3 class="custom-course-title">{{course_name}}</h3>
                        <a href="{{course_url}}" class="course-card-link">
                            <span>Explore Course</span>
                        </a>
                    </div>
                </div>
            {{/courses}}
        </div>
       
    </div>
</div>

       </div>
                <div class="section-top-performers">
    <div class="top-performer d-flex justify-content-center">
                            <h2  class="top-performer-heading">
                                Our Top <span style="color:#204070;">Performers</span> <span style="color: gold;">⭐</span>
                            </h2>
                    </div>

    <div class="performer-container-wrapper">
        <button class="carousel-nav prev-slide">&larr;</button>
        
        <div class="performers-carousel">
            {{#topperformers}}
            <div class="performer-card">
                            <div class="quote-mark single-quote">“</div>
                            <div class="performer-pic">
                            {{{picture}}}
                            </div>
                            <div class="performer-content">
                            <h4 class="performer-name">{{fullname}}</h4>
                            <p class="testimonial-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. <!-- You can replace with actual testimonials --></p>
                              <div class="points mb-1 text-dark  ">
                                Total Points: <strong>{{points}}</strong>
                            </div>
                            <div class="points">
                                ★★★★
                            </div>
                            <a href="{{profileurl}}" class="view-profile-link">View Profile</a>
                            </div>
                     
                        </div>
            {{/topperformers}}
        </div>
        
        <button class="carousel-nav next-slide">&rarr;</button>
    </div>
</div>



      <div id="page" data-region="mainpage" data-usertour="scroller" class="drawers {{#courseindexopen}}show-drawer-left{{/courseindexopen}} {{#blockdraweropen}}show-drawer-right{{/blockdraweropen}} drag-container {{jumbotronclass}}">
            <div id="topofscroll" class="main-inner">
                <div class="drawer-toggles d-flex">
                    {{#courseindex}}
                        <div class="drawer-toggler drawer-left-toggle open-nav d-print-none">
                            <button
                                class="btn icon-no-margin"
                                data-toggler="drawers"
                                data-action="toggle"
                                data-target="theme_boost-drawers-courseindex"
                                data-toggle="tooltip"
                                data-placement="right"
                                title="{{#str}}opendrawerindex, core{{/str}}"
                            >
                                <span class="sr-only">{{#str}}opendrawerindex, core{{/str}}</span>
                                {{#pix}} t/index_drawer, moodle {{/pix}}
                            </button>
                        </div>
                    {{/courseindex}}
                    {{#hasblocks}}
                        <div class="drawer-toggler drawer-right-toggle ml-auto d-print-none">
                            <button
                                class="btn icon-no-margin"
                                data-toggler="drawers"
                                data-action="toggle"
                                data-target="theme_boost-drawers-blocks"
                                data-toggle="tooltip"
                                data-placement="right"
                                title="{{#str}}opendrawerblocks, core{{/str}}"
                            >
                                <span class="sr-only">{{#str}}opendrawerblocks, core{{/str}}</span>
                                <span class="dir-rtl-hide">{{#pix}}t/blocks_drawer, core{{/pix}}</span>
                                <span class="dir-ltr-hide">{{#pix}}t/blocks_drawer_rtl, core{{/pix}}</span>
                            </button>
                        </div>
                    {{/hasblocks}}
                </div>
                {{{ output.full_header }}}
                {{#secondarymoremenu}}
                    <div class="secondary-navigation d-print-none">
                        {{> core/moremenu}}
                    </div>
                {{/secondarymoremenu}}

                {{#isloggedin}}
                 
                    

                    
                {{/isloggedin}}

                <div id="page-content" class="pb-3 d-print-block">
                    <div id="region-main-box">
                        {{#hasregionmainsettingsmenu}}
                        <div id="region-main-settings-menu" class="d-print-none">
                            <div>{{{ regionmainsettingsmenu }}}</div>
                        </div>
                        {{/hasregionmainsettingsmenu}}
                        <section id="region-main" aria-label="{{#str}}content{{/str}}">
                            {{#hasregionmainsettingsmenu}}
                                <div class="region_main_settings_menu_proxy"></div>
                            {{/hasregionmainsettingsmenu}}
                            {{{ output.course_content_header }}}
                            {{#headercontent}}
                                {{> core/activity_header }}
                            {{/headercontent}}
                            {{#overflow}}
                                <div class="container tertiary-navigation">
                                    <div class="navitem">
                                        {{> core/url_select}}
                                    </div>
                                </div>
                            {{/overflow}}
                            {{{ output.main_content }}}
                            {{{ output.activity_navigation }}}
                            {{{ output.course_content_footer }}}
                        </section>
                    </div>
                </div>
            </div>
            {{> theme_academi/footer }}
        </div>
        {{{ output.standard_after_main_region_html }}}
    </div>
{{#showpopup}}
<div id="customPopup" class="popup-overlay" style="display: none;">
  <div class="popup-content" style="
      background: white;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      margin: auto;
      position: relative;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  ">
    <button class="btn-close" onclick="closePopup()" style="
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
    ">&times;</button>
    <img src="{{alert_gif}}" alt="Alert" style="max-width: 100%; margin-bottom: 20px;" />
    <h3>Important Notice</h3>
    <p>{{popupmessage}}</p>
    <button onclick="redirectToCreateCourse()" style="
        background: #003366;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        margin-top: 10px;
        cursor: pointer;
    ">Create Course</button>
  </div>
</div>
{{/showpopup}}

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    document.querySelectorAll('[data-toggler="drawers"]').forEach(button => {
    button.addEventListener('click', function () {
        const targetId = this.getAttribute('data-target');
        const drawer = document.getElementById(targetId);
        if (drawer) {
            drawer.classList.toggle('show');
        }
    });
});

    document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll('[data-toggler="drawers"]').forEach(button => {
        button.addEventListener('click', function () {
            const targetId = this.getAttribute('data-target');
            const drawer = document.getElementById(targetId);
            if (drawer) {
                drawer.classList.toggle('show');
            }
        });
    });
});

   document.addEventListener("DOMContentLoaded", function() {
    // Check if admin menu exists
    const isAdmin = document.querySelector('[data-key="siteadminnode"]') !== null;
    
    if (isAdmin) {
        document.body.classList.add('has-admin-menu');
        console.log("Admin user detected");
    } else {
        console.log("Regular user detected");
    }
});
    function closePopup() {
    let popup = document.getElementById("customPopup");
    popup.style.animation = "fadeOut 0.5s ease-out forwards";
    setTimeout(() => {
        popup.style.display = "none";
    }, 500);
}


    function redirectToCreateCourse() {
        window.location.href = window.location.origin + "/moodle/course/edit.php";
    }

    document.addEventListener("DOMContentLoaded", function () {
        var showPopup = {{showpopup}};
        if (showPopup) {
            let popup = document.getElementById("customPopup");
            popup.style.display = "flex";
        }
    });

    document.addEventListener("DOMContentLoaded", function() {
        function createGaugeChart(canvasId, textId, value) {
            let canvas = document.getElementById(canvasId);
            if (!canvas) return;
            let progressValue = parseFloat(canvas.getAttribute('data-progress')) || 0;
            let ctx = canvas.getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Completed', 'Remaining'],
                    datasets: [{
                        data: [progressValue, 100 - progressValue],
                        backgroundColor: ['green', 'lightgray']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
            document.getElementById(textId).innerText = progressValue.toFixed(2) + "%";
        }
        createGaugeChart('learningPathChart', 'learningPathText');
        createGaugeChart('curriculumChart', 'curriculumText');
    });

    document.addEventListener("DOMContentLoaded", function () {
        const courses = document.querySelectorAll(".custom-course-card");
        const loadMoreBtn = document.getElementById("loadMoreBtn");
        let visibleCourses = 4;
        courses.forEach((course, index) => {
            if (index >= visibleCourses) {
                course.style.display = "none";
            }
        });
        loadMoreBtn.addEventListener("click", function () {
            if (loadMoreBtn.innerText === "Load More") {
                let nextCourses = visibleCourses + 4;
                courses.forEach((course, index) => {
                    if (index < nextCourses) {
                        course.style.display = "flex";
                    }
                });
                visibleCourses = nextCourses;
                if (visibleCourses >= courses.length) {
                    loadMoreBtn.innerText = "See Less";
                }
            } else {
                visibleCourses = 4;
                courses.forEach((course, index) => {
                    if (index >= visibleCourses) {
                        course.style.display = "none";
                    }
                });
                loadMoreBtn.innerText = "Load More";
            }
        });
    });
 
    document.querySelectorAll('.carousel-course-btn button').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.carousel-course-btn button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        });
    });

document.addEventListener('DOMContentLoaded', function() {
  const carousel = document.querySelector('.performers-carousel');
  document.querySelector('.next-slide').addEventListener('click', function() {
    carousel.scrollBy({ left: carousel.offsetWidth, behavior: 'smooth' });
  });
  document.querySelector('.prev-slide').addEventListener('click', function() {
    carousel.scrollBy({ left: -carousel.offsetWidth, behavior: 'smooth' });
  });
});


    </script>
</body>
</html>