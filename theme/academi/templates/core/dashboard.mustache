<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
        }

        .dashboard-header {
            color: black;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            font-size: 20px;
            position: relative;
            z-index: 1;
        }

        .dashboard-header img {
            border-radius: 50%;
            margin-right: 15px;
        }

        body,
        html {
            margin: 0;
            padding: 0;
        }

        .container {
            padding-left: 8px !important;
            padding-right: 8px !important;
            max-width: 100% !important;
            overflow-x: hidden;
        }

        .d-flex.justify-content-between {
            align-items: stretch;
            gap: 2%;
            overflow-x: hidden;

        }

        .dashboard-row {
            display: grid;
            grid-template-columns: 8fr 4fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .dashboard-card {

            background: white;
            border-radius: 24px;
            width: 100%;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }



        .dashboard-card:hover {
            background: linear-gradient(to bottom, #ffffff 0%, rgb(204 242 255) 100%);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }




        .dashboard-card h3 {
            font-size: 25px;
            margin-bottom: 10px;
            color: #333;
        }

        .img-heading {
            color: #204070;
        }

        .user-stats img {
            width: 70%;
            margin: 0 auto;
        }

        .user-stats-legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }

        .bullet {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .excellent {
            background-color: #204070;
        }

        .good {
            background-color: #3C6894;
        }

        .keep-going {
            background-color: #808080;
        }

        .course-enrolled {
            position: relative;
        }

        .course-enrolled .dotted-line {
            border-bottom: 3px dotted black;
            margin-bottom: 10px;
            padding-bottom: 10px;
        }

        .course-enrolled img {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 50px;
        }

        .course-enrolled h2 {
            font-size: 36px;
            color: #204070;
            margin: 0;
            filter: drop-shadow(3px 3px 8px rgba(0, 0, 0, 0.3));
            border-radius: 50%;
        }

        .learning-path {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 0;
        }

        .progress-container {
            position: relative;
            width: 180px;
            height: 180px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            overflow: visible;
        }

        .progress-container canvas {
            width: 180px !important;
            height: 180px !important;
            display: block;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            font-size: 24px;
            color: #204070;
            user-select: none;
            text-align: center;
            line-height: 1.2;
        }

        .progress-text small {
            font-size: 14px;
            display: block;
        }

        .learning-path-legend {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 15px;
            font-size: 14px;
            text-align: left;
            padding-left: 20px;
        }

        .learning-path-legend .bullet {
            width: 12px;
            height: 12px;
        }

        .completed-bullet {
            background-color: #204070;
        }

        .overdue-bullet {
            background-color: #808080;
        }

        .points-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
        }

        .points-bars {
            width: 70%;
        }

        .points-bars .progress {
            height: 10px;
            background: lightgray;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .points-bars .bar {
            height: 100%;
            border-radius: 5px;
        }

        .points-bars .course-info {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .points-total {
            text-align: center;
        }

        .points-total img {
            width: 40%;
            margin-bottom: 10px;
        }

        .points-total h4 {
            font-size: 18px;
            margin: 0;
        }

        .hours-activity-section {
            display: flex;
            padding: 10px;
            gap: 10px;
        }

        .hours-activity-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            text-align: center;
            margin-left: 2rem;
        }

        .hours-activity-header .arrow {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            font-size: 12px;
        }

        .increase .arrow {
            background-color: #90ee90;
            color: green;
        }

        .decrease .arrow {
            background-color: #ffcccb;
            color: red;
        }

        .hours-activity-chart {
            width: 70%;
            height: 200px;
            text-align: center;
        }

        .hours-total-section {
            width: 30%;
        }

        .fade:not(.show) {
            opacity: 1;
        }

        .total-hours {
            margin-bottom: 15px;
        }

        .total-hours h5 {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .hours-number {
            font-size: 32px;
            font-weight: bold;
            color: #204070;
        }

        #course-carousel {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
        }

        #course-carousel .course-item {
            display: none;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            transition: transform 0.4s ease-in-out;
            position: relative;
        }

        a.course-link-button {
            border: 1px solid #204070;
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 14px;
            text-decoration: none;
            color: #204070;
            font-weight: 500;
            display: inline-block;
            transition: all 0.3s ease;
        }

        a.course-link-button:hover {
            background-color: #204070;
            color: #ffffff;
        }

        .course-overlay {
            position: absolute;
            bottom: 0;
            width: 100%;
            color: #fff;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
        }

        .course-overlay h4 {
            margin: 0;
        }

        .course-overlay a {
            color: #fff;
            text-decoration: underline;
        }

        .recent-course {
            position: relative;
            width: 100%;
            height: 200px;
            border-radius: 5px;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            transition: transform 0.3s ease;
        }

        .recent-course:hover {
            transform: scale(1.05);
        }

        #course-results {
            position: absolute;
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 1001;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 0 0 5px 5px;
        }

        #course-results a {
            color: #333;
            text-decoration: none;
        }

        #course-results a:hover {
            background-color: #f8f9fa;
        }

        .search-course-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .search-course-image {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            object-fit: cover;
            margin-right: 10px;
        }

        .search-course-info {
            flex-grow: 1;
        }

        .search-course-name {
            font-weight: bold;
            margin-bottom: 3px;
        }

        .search-course-summary {
            font-size: 12px;
            color: #666;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .course-search-container {
            position: relative;
            width: 100%;
            max-width: 300px;
        }

        #search-results-container {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #204070;
            color: white;
            z-index: 999;
            border-radius: 0 0 5px 5px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            display: none;
        }

        .search-result-item {
            padding: 8px 12px;
            border-bottom: 1px solid white;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .search-result-item:hover {
            background-color: #3c6894;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 9999;
            max-height: 400px;
            overflow-y: auto;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item a {
            color: inherit;
            text-decoration: none;
        }

        .course-thumbnail {
            width: 60px;
            height: 60px;
            object-fit: cover;
            margin-right: 10px;
            border-radius: 4px;
        }

        .course-info h5 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .course-info p {
            margin: 0;
            font-size: 14px;
            color: #666;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .no-results {
            padding: 10px;
            color: #666;
            text-align: center;
        }

        #topofscroll.main-inner {
            padding: 0px 0px !important;
            margin: 0 !important;
        }

        .d-flex.justify-content-between {
            align-items: stretch;
            gap: 10px;
        }

        .dashboard-card.flex-grow-1 {
            flex: 1;
            min-width: 0;
            max-width: 100%;
        }

        .dashboard-card.flex-grow-1>* {
            flex-grow: 1;
        }

        .top-row,
        .bottom-row {
            gap: 20px;
        }

        .bottom-row .dashboard-card.flex-grow-1 {
            max-width: 32%;
        }

        @media (max-width: 768px) {

            .top-row,
            .bottom-row {
                flex-direction: column;
            }

            .dashboard-card.flex-grow-1 {
                max-width: 100% !important;
                margin-bottom: 20px;
            }
        }


        .streak-card {
            width: 320px;
            padding: 25px 30px;
            border-radius: 25px;
            background: linear-gradient(135deg, #f0f6fc 0%, #ffffff 60%);
            box-shadow: 0 0 10px 2px rgba(28, 60, 114, 0.4);
            font-family: Arial, sans-serif;
            color: #000000;
        }

        .streak-header {
            text-align: left;
            margin-bottom: 20px;
        }

        .streak-title-normal {
            font-size: 20px;
            font-weight: 400;
            margin-bottom: 4px;
        }

        .streak-title-bold {
            font-size: 24px;
            font-weight: 700;
            color: #1c3c72;
            margin-bottom: 10px;
        }

        .streak-subtext {
            font-size: 15px;
            font-weight: 400;
            color: #000;
        }

        .streak-progress-container {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 0 auto 20px auto;
        }

        .outer-ring {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(135deg, #b8d7f9, #d9e9fd);
            box-shadow: 0 0 15px rgba(0, 123, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .inner-circle {
            width: 140px;
            height: 140px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2;
            position: relative;
        }

        .flame-icon {
            position: absolute;
            top: -40px;
            /* overlaps the ring */
            left: 50%;
            transform: translateX(-50%);
            font-size: 60px;
            /* large size */
            color: #FF5722;
            filter: drop-shadow(0 0 5px rgba(255, 87, 34, 0.7));
            z-index: 3;
        }

        .progress-number {
            font-size: 48px;
            font-weight: 700;
            color: #1c3c72;
            line-height: 1;
            margin-bottom: 6px;
        }

        .progress-text {
            font-size: 16px;
            font-weight: 400;
            color: #000;
        }

        /* Lift the inner white circle smoothly */
        .lift-inner-circle {
            transition: transform 0.3s ease;
        }

        /* Lift the flame with delay */
        .lift-flame {
            transition: transform 0.3s ease 0.15s;
        }

        /* On hover of the whole container, lift inner white circle up */
        .streak-hover-container:hover .lift-inner-circle {
            transform: translateY(-10px);
        }

        /* On hover, lift flame up separately */
        .streak-hover-container:hover .lift-flame {
            transform: translate(-50%, -20px);
        }

        .lift-flame {
            position: absolute;
            top: -48px;
            left: 47%;
            width: 60px;
            height: 80px;
            z-index: 3;

            /* Center horizontally */
            transform: translateX(-50%);
            transition: transform 0.3s ease 0.15s;
        }

        /* On hover, lift vertically but keep horizontal centering */
        .streak-hover-container:hover .lift-flame {
            transform: translate(-50%, -20px);
        }

        #quote-text {
            transition: opacity 1s ease;
            opacity: 1;
        }

        .fade-out {
            opacity: 0;
        }












        .learning-path-card {
            background: white;
            border-radius: 24px;
            width: 100%;
            max-width: 380px;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .learning-path-card:hover {
            background: linear-gradient(to bottom, #ffffff 0%, rgb(204 242 255) 100%);

            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }

        .card-header {
            margin-bottom: 30px;
        }

        .card-title {
            font-size: 28px;
            font-weight: 700;
            color: #204070;
            margin-bottom: 5px;
        }

        .card-subtitle {
            font-size: 16px;
            color: #7a8ca5;
            font-weight: 500;
        }

        .progress-container {
            position: relative;
            width: 240px;
            height: 240px;
            margin: 0 auto 30px;
        }

        .progress-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #f0f3f8;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.1);
        }

        .progress-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            clip: rect(0, 120px, 240px, 0);
        }

        .progress-fill {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(#3c6cff, #6d95ff);
            clip: rect(0, 120px, 240px, 0);
            transform: rotate(216deg);
            /* 60% of 360° is 216° */
        }

        .progress-inner {
            position: absolute;
            width: 200px;
            height: 200px;
            background: white;
            border-radius: 50%;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .progress-value {
            font-size: 48px;
            font-weight: 700;
            color: #204070;
            line-height: 1;
        }

        .progress-label {
            font-size: 18px;
            color: #7a8ca5;
            margin-top: 5px;
            font-weight: 500;
        }

        .progress-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #204070;
        }

        .stat-label {
            font-size: 14px;
            color: #7a8ca5;
            margin-top: 5px;
        }

        .progress-bar {
            height: 10px;
            background: #f0f3f8;
            border-radius: 5px;
            margin: 25px 0 15px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(to right, #3c6cff, #6d95ff);
            width: 60%;
            border-radius: 5px;
        }

        .continue-button {
            background: linear-gradient(to right, #3c6cff, #6d95ff);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 14px 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(60, 108, 255, 0.3);
            width: 100%;
            margin-top: 15px;
        }

        .continue-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(60, 108, 255, 0.4);
        }

        .decoration {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            opacity: 0.1;
        }

        .decoration-1 {
            top: -40px;
            right: -40px;
            background: linear-gradient(135deg, #3c6cff, #6d95ff);
        }

        .decoration-2 {
            bottom: -60px;
            left: -60px;
            background: linear-gradient(135deg, #3c6cff, #6d95ff);
            width: 180px;
            height: 180px;
        }

        @media (max-width: 480px) {
            .learning-path-card {
                padding: 20px;
            }

            .progress-container {
                width: 200px;
                height: 200px;
            }

            .progress-inner {
                width: 160px;
                height: 160px;
                top: 20px;
                left: 20px;
            }

            .progress-value {
                font-size: 40px;
            }
        }







        .learning-card {
            background: white;
            border-radius: 24px;
            padding: 30px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
        }

        .learning-card:hover {
            background: linear-gradient(to bottom, #ffffff 0%, rgb(230 246 255) 100%);
            box-shadow: 0 12px 30px rgba(32, 64, 112, 0.15);
            transform: translateY(-5px);
        }

        .card-header {
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 28px;
            font-weight: 700;
            color: #204070;
            margin-bottom: 5px;
        }

        .card-subtitle {
            font-size: 16px;
            color: #7a8ca5;
            font-weight: 500;
        }

        .course-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .course-category {
            background: #e6f0ff;
            color: #204070;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .course-status {
            color: {
                    {
                    #is_completed
                }
            }

            #28a745 {
                    {
                    /is_completed
                }
            }

                {
                    {
                    ^is_completed
                }
            }

            #ff6b6b {
                    {
                    /is_completed
                }
            }

            ;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }

        .course-image {
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .course-image img {
            width: 100%;
            height: 170px;
            object-fit: cover;
            display: block;
        }

        .course-name {
            font-size: 22px;
            font-weight: 700;
            color: #204070;
            margin-bottom: 20px;
            text-align: center;
        }

        .progress-section {
            background: #f8fbff;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid #e6f0ff;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-title {
            font-size: 16px;
            font-weight: 600;
            color: #204070;
        }

        .progress-percent {
            font-size: 18px;
            font-weight: 700;
            color: #3c6cff;
        }

        .progress-bar-container {
            background: #e6f0ff;
            height: 10px;
            border-radius: 5px;
            margin-bottom: 5px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(to right, #3c6cff, #6d95ff);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .course-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            flex: 1;
            background: #f8fbff;
            border-radius: 10px;
            margin: 0 5px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: #204070;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            color: #7a8ca5;
        }

        .no-course {
            text-align: center;
            padding: 30px 0;
            color: #7a8ca5;
        }

        .no-course i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #e6f0ff;
        }

        .no-course p {
            font-size: 18px;
            margin: 0;
        }

        .continue-button {
            background: linear-gradient(to right, #3c6cff, #6d95ff);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 14px 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(60, 108, 255, 0.3);
            width: 100%;
            margin-top: 15px;
            text-align: center;
            text-decoration: none;
            display: block;
        }

        .continue-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(60, 108, 255, 0.4);
            background: linear-gradient(to right, #2a5be6, #5c85e6);
        }

        .decoration {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            opacity: 0.1;
        }

        .decoration-1 {
            top: -40px;
            right: -40px;
            background: linear-gradient(135deg, #3c6cff, #6d95ff);
        }

        .decoration-2 {
            bottom: -60px;
            left: -60px;
            background: linear-gradient(135deg, #3c6cff, #6d95ff);
            width: 180px;
            height: 180px;
        }


        #course-carousel .course-item {
            width: 100%;
            transition: opacity 0.5s ease;
            position: absolute;
            top: 0;
            left: 0;
        }

        #course-carousel .course-item.show {
            display: block !important;
            opacity: 1;
            position: relative;
        }

        #course-carousel .course-item.hide {
            opacity: 0;
            display: none !important;
            position: absolute;
        }
    </style>
</head>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<body>
    <div class="bg-light">
        <div class="dashboard-header justify-content-between">
            <div class="d-flex align-items-center">
                {{{userpicture}}}
                <span class="ms-2">Hey! {{username}}</span>
            </div>
        </div>

        <div class="container">
            <!-- First Row: User Stats, Course Enrolled, Learning Path -->
            <div class="d-flex justify-content-between top-row " style="margin: 10px 30px;">
                <!-- New Streaks Card -->






                <div class="learning-card">

                    <div style="font-size: 25px; font-weight: 400; margin-bottom: 5px;">
                        Start a daily&nbsp;<span style="font-weight: 700; color: #1c3c72;">Streak!</span>
                    </div>
                    <div style="font-size: 15px; font-weight: 400; margin-bottom: 30px;">
                        You’re off to a great start!
                    </div>

                    <div class="streak-hover-container"
                        style="position: relative; width: 180px; height: 180px; margin: 0 auto; margin-top: 60px;">

                        <!-- Your SVG flame -->
                        <div class="lift-flame"
                            style="position: absolute; top: -48px; left: 47%; width: 60px; height: 80px; z-index: 3;">

                            <svg width="80" height="150" viewBox="0 0 298 600" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d_588_10)">
                                    <path
                                        d="M147.435 24C200.325 131.363 -102.838 235.507 96.9984 380C81.9374 309.688 105.869 264.47 147.435 230.6C131.622 285.125 171.386 321.936 160.521 361.461C178.008 355.406 188.039 342.766 196.508 328.746C209.359 341.803 214.653 358.781 211.775 380C277.465 333.993 287.992 276.687 237.947 206.972C235.342 233.601 218.532 248.312 196.508 254.727C243.328 138.056 224.103 70.5153 147.435 24Z"
                                        fill="#FF5915" />
                                    <path
                                        d="M64.106 139.263C36.0928 109.339 46.2794 65.4095 89.5726 40.2612C71.5338 88.0089 107.718 101.063 64.106 139.263Z"
                                        fill="#FF5915" />
                                </g>
                                <defs>
                                    <filter id="filter0_d_588_10" x="0.299999" y="0.299999" width="296.75"
                                        height="411.4" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                        <feColorMatrix in="SourceAlpha" type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                        <feOffset dy="4" />
                                        <feGaussianBlur stdDeviation="13.85" />
                                        <feComposite in2="hardAlpha" operator="out" />
                                        <feColorMatrix type="matrix"
                                            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                        <feBlend mode="normal" in2="BackgroundImageFix"
                                            result="effect1_dropShadow_588_10" />
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_588_10"
                                            result="shape" />
                                    </filter>
                                </defs>
                            </svg>

                        </div>

                        <!-- Outer ring with light blue to white gradient -->
                        <div class="lift-circle"
                            style="width: 180px; height: 180px; border-radius: 50%; background: linear-gradient(to bottom, #c6ddf8 0%, #ffffff 100%);  display: flex; align-items: center; justify-content: center; transition: transform 0.3s ease;">


                            <!-- Inner white circle -->
                            <div class="lift-inner-circle"
                                style="width: 140px; height: 140px; background: #fff; border-radius: 50%; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">

                                <div
                                    style="font-size: 48px; font-weight: 700; color: #1c3c72; line-height: 1; user-select: none;">
                                    2
                                </div>

                                <div
                                    style="font-size: 16px; font-weight: 400; color: #000; user-select: none; margin-top: 6px; line-height: 1.2;">
                                    Days!<br>Keep going
                                </div>

                            </div>
                        </div>

                    </div>

                    <div style="text-align: center; margin-top: 0px; font-size: 20px; font-weight: 400;">
                        1/1 Visit ✅ <span style="color: #28a745; font-weight: 700;"></span>
                    </div>

                    <div id="quote-text" style="text-align: center; margin-top: 8px; font-size: 13px; color: #000;">
                        Small steps every day lead to big achievements.
                    </div>

                    <!-- Progress Bar Container -->
                    <div
                        style="margin: 20px auto 0; width: 100%; height: 12px; background: #eee; border-radius: 10px; overflow: hidden;">
                        <div
                            style="width: 25%; height: 100%; background: linear-gradient(90deg, #204070, #6d95ff); border-radius: 10px;">
                        </div>
                    </div>

                    <div id="streak-goal-text"
                        style="text-align: center; margin-top: 20px; font-size: 15px; color: #1c3c72;">
                        Complete 10 days streak to earn a bronze badge!
                    </div>




                </div>


                <!-- Continue Learning -->
                <div class="learning-card">
                    <div class="decoration decoration-1"></div>
                    <div class="decoration decoration-2"></div>

                    <div class="card-header">
                        <h1 class="card-title">Continue Learning</h1>
                        <p class="card-subtitle">Pick up where you left off</p>
                    </div>

                    <div class="card-content">
                        {{#recentCourse}}
                        <div class="course-meta">
                            <div class="course-category">{{category}}</div>
                            <div class="course-status">
                                {{#is_completed}}✅ Completed{{/is_completed}}
                                {{^is_completed}}⌛ Not Completed{{/is_completed}}
                            </div>
                        </div>

                        <div class="course-image">
                            <img src="{{course_image_url}}" alt="{{coursename}}">
                        </div>

                        <div class="course-name">{{coursename}}</div>

                        <div class="progress-section">
                            <div class="progress-header">
                                <div class="progress-title">Course Progress</div>
                                <div class="progress-percent">{{progressPercentage}}%</div>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" style="width: {{progressPercentage}}%;"></div>
                            </div>
                        </div>

                        <div class="course-stats">
                            <div class="stat-item">
                                <div class="stat-value">{{total_modules}}</div>
                                <div class="stat-label">Modules</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">{{progressPercentage}}%</div>
                                <div class="stat-label">Complete</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">{{last_accessed_time}}</div>
                                <div class="stat-label">Last Viewed</div>
                            </div>
                        </div>
                        {{/recentCourse}}
                        {{^recentCourse}}
                        <div class="no-course">
                            <i class="fas fa-book-open"></i>
                            <p>No recently accessed course found</p>
                        </div>
                        {{/recentCourse}}
                    </div>

                    {{#recentCourse}}
                    <a href="{{courseurl}}" class="continue-button">
                        {{#is_completed}}Review Course{{/is_completed}}
                        {{^is_completed}}Continue Learning →{{/is_completed}}
                    </a>
                    {{/recentCourse}}
                </div>

                <!-- Recently Enrolled Courses -->
                <div class="dashboard-card flex-grow-1" style="max-width: 30%; border-radius: 20px; padding: 20px;">
                    <div class="card-header">
                        <h1 class="card-title">Recent Enrolled Courses</h1>
                        <p class="card-subtitle">Explore your recently enrolled courses</p>
                    </div>
                    <div id="course-carousel" style="height: auto; position: relative; overflow: hidden;">
                        {{#enrolledCourses}}
                        <div class="course-item" style="display: none;">
                            <div class="learning-card">
                                <!-- Category + Completion Status -->
                                <div class="course-meta">

                                    <div class="course-category">{{category}}</div>
                                    <div class="course-status"
                                        style="color: {{#course_completion_status}}#28a745{{/course_completion_status}}{{^course_completion_status}}#ff6b6b{{/course_completion_status}}">
                                        {{#course_completion_status}}✅ Completed{{/course_completion_status}}
                                        {{^course_completion_status}}⌛ Not Completed{{/course_completion_status}}
                                    </div>
                                </div>

                                <!-- Course Image -->
                                <div class="course-image">
                                    <img src="{{course_image_url}}" alt="{{course_name}}">
                                </div>

                                <!-- Course Name -->
                                <div class="course-name">{{coursename}}</div>


                                <!-- Progress Section -->
                                <div class="progress-section">
                                    <div class="progress-header">
                                        <div class="progress-title">Course Progress</div>
                                        <div class="progress-percent">{{progressPercentage}}%</div>
                                    </div>
                                    <div class="progress-bar-container">
                                        <div class="progress-bar-fill" style="width: {{progressPercentage}}%;"></div>
                                    </div>
                                </div>

                                <!-- Stats -->
                                <div class="course-stats">
                                    <div class="stat-item">
                                        <div class="stat-value">{{total_modules}}</div>
                                        <div class="stat-label">Modules</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">{{progressPercentage}}%</div>
                                        <div class="stat-label">Complete</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-value">{{last_accessed_time}}</div>
                                        <div class="stat-label">Last Viewed</div>
                                    </div>
                                </div>

                                <!-- Button -->
                                <a href="{{courseurl}}" class="continue-button">Go to Course →</a>
                            </div>
                        </div>
                        {{/enrolledCourses}}

                        {{^enrolledCourses}}
                        <div class="no-course">
                            <i class="fas fa-book-open"></i>
                            <p>No recent courses enrolled</p>
                        </div>
                        {{/enrolledCourses}}
                    </div>
                </div>

                <!-- Learning Path -->
                <div class="learning-path-card">
                    <div class="decoration decoration-1"></div>
                    <div class="decoration decoration-2"></div>

                    <div class="card-header">
                        <h1 class="card-title">Learning Path</h1>
                        <p class="card-subtitle">Track your progress and continue learning</p>
                    </div>

                    <div class="progress-container">
                        <div class="progress-bg"></div>
                        <div class="progress-circle">
                            <div class="progress-fill"></div>
                        </div>
                        <div class="progress-inner">
                            <div class="progress-value" id="progressValue">{{learningPathPercentage}}%</div>
                            <div class="progress-label">Completed</div>
                        </div>
                    </div>

                    <div class="progress-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="modulesValue">{{totalModules}}</div>
                            <div class="stat-label">Total</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="completedValue">{{completedCourses}}</div>
                            <div class="stat-label">Completed</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="remainingValue">{{remainingCourses}}</div>
                            <div class="stat-label">Remaining</div>
                        </div>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-bar-fill" id="progressBarFill" style="width: {{learningPathPercentage}}%;">
                        </div>
                    </div>

                    <p style="color: #7a8ca5; margin-bottom: 10px;">
                        You've completed <span id="completedPercentText">{{learningPathPercentage}}%</span> of your
                        learning path
                    </p>

                </div>
            </div>

            <!-- Second Row: Hours Activity, Earned Points, Course Enrolled -->
            <div class="d-flex justify-content-between top-row mb-4">
                <!-- Hours Activity -->
                <div class="dashboard-card flex-grow-1 margin-left: 15px;" style=" margin-left: 30px;>
                    <h2>Hours <span class=" img-heading">Activity</span></h2>
                    <div class="hours-activity-section d-flex justify-content-around align-items-center">
                        <div class="hours-activity-chart">
                            <div class="hours-activity-header">
                                <span
                                    style="color: {{#isIncrease}}green{{/isIncrease}}{{^isIncrease}}red{{/isIncrease}};">
                                    {{#isIncrease}}+{{/isIncrease}}{{^isIncrease}}-{{/isIncrease}}{{percentageChange}}%
                                    {{#isIncrease}}Increase than last week{{/isIncrease}}{{^isIncrease}}Decrease than
                                    last week{{/isIncrease}}
                                </span>
                            </div>
                            <canvas id="hoursActivityChart"></canvas>
                        </div>
                        <div class="hours-total-section">
                            <div class="total-hours">
                                <div>
                                    <h5>Current Week</h5>
                                </div>
                                <div class="hours-number">{{currentWeekTotal}} hrs</div>
                            </div>
                            <div class="total-hours">
                                <h5>Previous Week</h5>
                                <div class="hours-number">{{previousWeekTotal}} hrs</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Total Earned Points -->
                <div class="dashboard-card flex-grow-1" style="max-width: 46%;">
                    <h3>Total <span class="img-heading">Earned Points</span></h3>
                    <div class="points-section">
                        <div class="points-bars">
                            {{#courses}}
                            <div class="course-info">
                                <span>{{course_name}}</span>
                                <span>{{points_display}}</span>
                            </div>
                            <div class="progress">
                                <div class="bar" style="width: {{percentage}}%; background-color: {{bar_color}};"></div>
                            </div>
                            {{/courses}}
                        </div>
                        <div class="points-total">
                            <img src="{{course_award_url}}" alt="Award">
                            <h4><span class="img-heading">{{totalPoints}}</span>/{{totalPossiblePoints}}</h4>
                        </div>
                    </div>
                </div>

                <!-- Course Enrolled -->
                <div class="dashboard-card flex-grow-1" style="max-width: 14%; margin-right:30px ">
                    <h3>Course <span class="img-heading">Enrolled</span> </h3>
                    <div class="d-flex justify-content-center mt-4" style="border-bottom: 3px dotted black; ">
                        <span class="text-left">
                            <h1 class="coursecount text-left  fw-bold" style="color:#204070; font-size:60px;">
                                {{totalCourses}}</h1>
                        </span>
                    </div>
                    <span>
                        <img src={{course_enrolled_url}} alt="User enrollments" width="90" class="mt-4">
                    </span>
                </div>
            </div>
        </div>
    </div>

    <script>

        document.addEventListener('DOMContentLoaded', function () {
            // Read dynamic values from placeholders (replace these with actual data injection if needed)
            const learningPathPercentage = parseFloat('{{learningPathPercentage}}') || 0;
            const remainingCourses = parseInt('{{totalOverdue}}') || 0;
            const completedCourses = parseInt('{{completedCourses}}') || 0;
            const totalModules = remainingCourses + completedCourses;



            // Update numeric texts (if your templating engine already injected values, this ensures fallback)
            document.getElementById('modulesValue').textContent = totalModules;
            document.getElementById('completedValue').textContent = completedCourses;
            document.getElementById('remainingValue').textContent = remainingCourses;
            document.getElementById('completedPercentText').textContent = learningPathPercentage + '%';

            // Animate progress bar fill width
            const progressBarFill = document.getElementById('progressBarFill');
            progressBarFill.style.width = learningPathPercentage + '%';

            // Animate circular progress
            const progressFill = document.querySelector('.progress-fill');
            const progressValue = document.getElementById('progressValue');

            let progress = 0;
            const targetProgress = learningPathPercentage;
            const duration = 1500; // milliseconds
            const increment = targetProgress / (duration / 16); // ~60fps

            function animateProgress() {
                if (progress < targetProgress) {
                    progress += increment;
                    if (progress > targetProgress) progress = targetProgress;

                    const degrees = (progress / 100) * 360;
                    progressFill.style.transform = `rotate(${degrees}deg)`;
                    progressValue.textContent = `${Math.round(progress)}%`;

                    requestAnimationFrame(animateProgress);
                }
            }

            setTimeout(animateProgress, 300);
        });
        document.addEventListener("DOMContentLoaded", function () {
            // Course Carousel Functionality
            const courseItems = document.querySelectorAll("#course-carousel .course-item");
            const carouselContainer = document.getElementById("course-carousel");
            let currentIndex = 0;
            let rotationInterval;

            function showNextCourse() {
                // Hide all courses
                courseItems.forEach((item) => (item.style.display = "none"));
                // Show the current course
                courseItems[currentIndex].style.display = "block";
                // Move to the next course
                currentIndex = (currentIndex + 1) % courseItems.length;
            }

            // Start rotation
            function startRotation() {
                rotationInterval = setInterval(showNextCourse, 2500);
            }

            // Stop rotation
            function stopRotation() {
                clearInterval(rotationInterval);
            }

            // Show the first course immediately
            if (courseItems.length > 0) {
                showNextCourse();
                // Then start auto-rotation
                startRotation();
            }

            // Pause on hover
            if (carouselContainer) {
                carouselContainer.addEventListener("mouseenter", stopRotation);
                // Resume on mouse leave
                carouselContainer.addEventListener("mouseleave", startRotation);
            }

            // Hours Activity Chart
            var ctx = document.getElementById("hoursActivityChart").getContext("2d");
            var hoursData = JSON.parse('{{{hoursActivity}}}');

            var data = {
                labels: ["sun", "mon", "tue", "wed", "thr", "fri", "sat"],
                datasets: [{
                    label: "Hours Spent",
                    data: hoursData,
                    backgroundColor: ["#000000", "#808080", "#204070", "#204070", "#204070", "#204070", "#204070"],
                    borderWidth: 0,
                    barThickness: 20
                }]
            };

            var options = {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { display: false },
                    tooltip: { enabled: true }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            display: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            };

            new Chart(ctx, { type: "bar", data: data, options: options });

            const learningPathCtx = document.getElementById('learningPathPieChart').getContext('2d');
            const completedPercent = parseFloat("{{learningPathPercentage}}") || 0;
            const remainingPercent = 100 - completedPercent;

            // Create a custom gradient along the arc using Canvas API
            const gradient = learningPathCtx.createConicGradient(-Math.PI / 2, 70, 90);
            gradient.addColorStop(0, '#204070');  // Dark blue start
            gradient.addColorStop(1, '#A3C0F9');  // Light blue end

            const learningPathChart = new Chart(learningPathCtx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [completedPercent, remainingPercent],
                        backgroundColor: [gradient, '#e6e6e6'],
                        borderWidth: 0,
                        cutout: '55%',   // bigger thickness of the arc
                        borderRadius: 30,  // rounded edges of the arc
                    }]
                },
                options: {
                    responsive: false,
                    rotation: -90,         // start from top center
                    circumference: 360,    // full circle
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    animation: {
                        animateRotate: true,
                        duration: 1700
                    }
                }
            });


            // Update center text
            const progressText = document.querySelector('.progress-text');
            if (progressText) {
                progressText.innerHTML = `${completedPercent}%<br><small>Completed</small>`;
            }
        });


        document.addEventListener('DOMContentLoaded', function () {
            fetch('/moodle/theme/academi/streak.php', {
                method: 'POST',
                credentials: 'same-origin'
            })
                .then(response => response.json())
                .then(data => {
                    // Update streak count
                    const streakCountElement = document.getElementById('streak-count');
                    if (streakCountElement) {
                        streakCountElement.textContent = data.streakCount + " weeks";
                    }

                    // Update visit status text
                    const visitStatus = document.getElementById('visit-status');
                    if (visitStatus) {
                        if (data.visitDone) {
                            visitStatus.innerHTML = '<span>✅</span> 1/1 visit';
                        } else {
                            visitStatus.innerHTML = '<span>❌</span> 0/1 visit';
                        }
                    }
                })
                .catch(console.error);
        });




        document.addEventListener("DOMContentLoaded", function () {
            const courseItems = document.querySelectorAll("#course-carousel .course-item");
            let currentIndex = 0;
            if (courseItems.length === 0) return;

            function showCourse(index) {
                courseItems.forEach((item, i) => {
                    if (i === index) {
                        item.classList.add('show');
                        item.classList.remove('hide');
                    } else {
                        item.classList.remove('show');
                        item.classList.add('hide');
                    }
                });
            }

            function startCarousel() {
                showCourse(currentIndex);
                setInterval(() => {
                    currentIndex = (currentIndex + 1) % courseItems.length;
                    showCourse(currentIndex);
                }, 3500);
            }

            startCarousel();
        });
        document.addEventListener('DOMContentLoaded', () => {
            const quotes = [
                "Small steps every day lead to big achievements.",
                "Consistency is the key to success.",
                "Keep pushing forward, no matter what."
            ];

            let currentIndex = 0;
            const quoteElement = document.getElementById('quote-text');

            setInterval(() => {
                // Start fade out
                quoteElement.classList.add('fade-out');

                // After fade out completes (500ms), change text and fade in
                setTimeout(() => {
                    currentIndex = (currentIndex + 1) % quotes.length;
                    quoteElement.textContent = quotes[currentIndex];
                    quoteElement.classList.remove('fade-out');
                }, 500); // Match this duration to CSS transition time
            }, 5000); // Change every 5 seconds
        });



        document.addEventListener('DOMContentLoaded', () => {
            const streakGoals = [
                "Complete 10 days streak to earn a bronze badge!",
                "Continue for 25 days to earn a silver badge!",
                "Continue for 40 days to earn a gold badge!"
            ];

            let streakIndex = 0;
            const streakGoalElement = document.getElementById('streak-goal-text');

            setInterval(() => {
                streakIndex = (streakIndex + 1) % streakGoals.length;
                streakGoalElement.textContent = streakGoals[streakIndex];
            }, 10000); // Change every 5 seconds
        });

    </script>
</body>

</html>