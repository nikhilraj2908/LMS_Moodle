{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template core_course/coursecard

    This template renders a card for the course cards.

    Example context (json):
    {
        "courses": [
            {
                "id": 2,
                "name": "Assignment due 1",
                "viewurl": "https://moodlesite/course/view.php?id=2",
                "courseimage": "https://moodlesite/pluginfile/123/course/overviewfiles/123.jpg",
                "fullname": "course 3",
                "shortname": "C3",
                "hasprogress": true,
                "progress": 10,
                "coursetime": "3 hours 55 minutes",
                "visible": true
            }
        ]
    }
}}

<style> 
 .text-truncate{
padding-right : 5px;
}

.course-title {
    font-size: 1.5rem; /* or 20px */
    font-weight: 600;
}
.course-category-badge {
    position: absolute;
    top: 0;
    right: 0;
    background-color: #204070;
    color: white;
    font-size: 0.85rem;
    font-weight: 500;
    padding: 4px 10px;
    border-bottom-left-radius: 10px;
}

.block .block-cards span.categoryname, .block .block-cards .btn-link {
    color: #ffffff;
}
.completed-badge-course{
    position:absolute;
    top:0px;
    left:-8px;
}

</style>
<div class="card course-card mx-1" role="listitem"
    data-region="course-content"
    data-course-id="{{{id}}}">
    <a href="{{viewurl}}" tabindex="-1">
        <div class="card-img-top" style='background-image: url("{{{courseimage}}}");'>
            <span class="sr-only">{{fullname}}</span>
        </div>
    </a>
    <div class="card-body pe-1 course-info-container" id="course-info-container-{{id}}-{{uniqid}}">
        <div class="d-flex align-items-start">
            <div class="w-100 text-truncate">
                {{#showshortname}}
                    <div class="text-muted muted d-flex mb-1 flex-wrap">
                        <span class="sr-only">
                            {{#str}}aria:courseshortname, core_course{{/str}}
                        </span>
                        <div>
                            {{{shortname}}}
                        </div>
                    </div>
                {{/showshortname}}
         
<div class="course-category-badge">
    {{$coursecategory}}{{/coursecategory}}
</div>

<div class="mt-2 px-1   d-flex">
  <a href="{{viewurl}}" class="aalink coursename me-2 mb-1 course-title">
    {{> core_course/favouriteicon }}
    <span class="sr-only  ">
        {{#str}}aria:coursename, core_course{{/str}}
    </span>
    {{$coursename}}{{/coursename}}

</a>

</div>


<div class="d-flex align-items-center justify-content-between mt-1 px-1">
  <div class="progress flex-grow-1 me-2" style="height: 10px; border-radius: 20px; background-color: #ccc;">
    <div class="progress-bar" role="progressbar"
        style="width: {{#hasprogress}}{{progress}}{{/hasprogress}}{{^hasprogress}}0{{/hasprogress}}%; background-color: #4CAF50;"
        aria-valuenow="{{#hasprogress}}{{progress}}{{/hasprogress}}{{^hasprogress}}0{{/hasprogress}}" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>

  <div class="d-flex align-items-center" style="font-weight: bold; font-size: 1rem;">
    {{#hasprogress}}{{progress}}{{/hasprogress}}{{^hasprogress}}0{{/hasprogress}}% complete

   
  </div>
</div>







            
                {{^visible}}
                    <div class="d-flex flex-wrap">
                        <span class="badge bg-info text-white">
                            {{#str}} hiddenfromstudents {{/str}}
                        </span>
                    </div>
                {{/visible}}
            </div>
        </div>
    </div>
    
    {{#coursetime}}
    <div class="card-duration text-muted px-2">
        <small>{{coursetime}}</small>
    </div>
    {{/coursetime}}
    
    <!-- Custom Button: Start learning / Continue learning -->
   
    
<div class="d-flex justify-content-between align-items-center mb-2 px-3">
    <a href="{{viewurl}}" class="btn btn-primary" style="border-radius: 8px; font-weight: 500; font-size: 0.85rem;">
        {{#hasprogress}}Continue Learning{{/hasprogress}}{{^hasprogress}}Start Learning{{/hasprogress}}
    </a>
    {{#iscomplete}}
      <span class="completed-badge-course badge bg-success ms-2 text-right p-2 text-light" style="font-size: 0.75rem;">Completed</span>
    {{/iscomplete}}
    {{$menu}}{{/menu}}
</div>
   
</div>
